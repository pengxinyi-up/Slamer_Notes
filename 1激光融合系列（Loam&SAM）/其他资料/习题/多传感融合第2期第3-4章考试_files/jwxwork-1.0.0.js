!function(){var e;try{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function o(e,t,n){return(o=i()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o}).apply(null,arguments)}function a(e){var t=void 0;return(a=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return o(e,arguments,n(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),r(a,e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=window.encodeURIComponent;function s(){}function l(e){return e}function f(){return Math.random().toString(36).slice(2)}var d,p=l("220513-171529-989"),h=l("wwopendata.web.js"),w=l("277f7f6fb07982dfc2e2d67a2bfcee66f70dbe83ff4a4cf5e1c33b264de7a6e2"),g=l("l3/MCjJgm6YVnBgxHanHyaszuwx3mT/s7b1+QsbXHRMyaKGkpLnv/wIVtBGCUGxewor2PseP3eMH0abyEB0zHZxMrhWxcXvQz9Yvdwtpl5keb8umU1w7D7iOs34TDE2P6/RMQL5I8W+O7Vz4Haa8LmQkY7JSKItnM58Ed832uUw="),v=l("l5pbq64y.AFKgtge3EFNn0Q9qhGmludrIMS7ffFSTL8CTynd2qf1j"),y=l(h+"@"+p),m=location.origin||location.protocol+"//"+location.host,b="https://open.work.weixin.qq.com",O=b+"/wwopen/openData/frame/index#origin="+u(m),E=[],_=v;function S(e){E.unshift({level:2,msg:e})}function A(e){E.unshift({level:4,msg:e}),C()}function C(){d||(d=setTimeout(j,10))}function j(){d=null,0!==E.length&&(!function(e,t){var n=new XMLHttpRequest;"withCredentials"in n||(n=new XDomainRequest);for(var r=[],i=t.length,o=0;o<i;o++)r.push(["msg["+o+"]="+u(t[o].msg),"level["+o+"]="+t[o].level].join("&"));r.push("count="+i),n.open("POST",e),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(r.join("&"))}("https://aegis.qq.com/collect?id=bRLDot6R4Kymzz0jPO&from="+m+"&sessionId="+u(_)+"&version="+u(y),E.reverse()),E=[])}var k={};function x(e,t){k.hasOwnProperty(e)||(k[e]=[]),k[e].push(t)}function D(e,t){if(k.hasOwnProperty(e)){var n=k[e],r=n.indexOf(t);r>=0&&n.splice(r,1)}}function M(e,t,n){if(void 0===n&&(n=!1),k.hasOwnProperty(e))if(n){var r={type:e,detail:t};k[e].forEach((function(e){try{e(r)}catch(e){}}))}else M(e,t,!0)}function T(e,t){return function(){try{return t.apply(this,arguments)}catch(t){W(t,e),M("error",t)}}}e={captureException:W};var P=q(S),R=q((function(e){E.unshift({level:2,msg:e}),C()})),F=q(A);function W(e,t){A("["+t+"] "+I(e))}function q(e){return function(){for(var t=[],n=0,r=arguments.length;n<r;n++)t.push(N(arguments[n]));e(t.join(" "))}}function N(e){return e?"object"!=typeof e?e:"string"==typeof e.stack?I(e):JSON.stringify(e):e}function I(e){return e+" "+e.stack}var L=Object.freeze({__proto__:null,wrap:T,log:P,warn:R,error:F,captureMessage:function(e){S(e),j()},captureException:W}),z="[ww-open-data]";function U(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];P.apply(L,t)}function H(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];R.apply(L,t)}function J(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];F.apply(L,t)}var B=Function.prototype.call;function V(e){var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(n){if("prototype"!==n){var r=Object.getOwnPropertyDescriptor(e,n),i=Object.create(null);X(i,"value",r.value),X(i,"get",r.get),X(i,"set",r.set),X(t,n,Object.freeze(i))}})),t}function X(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!0})}var K=function(){var e={JSON:window.JSON,Promise:window.Promise,Uint8Array:window.Uint8Array,Function:window.Function,Object:window.Object,Array:window.Array,String:window.String,WeakMap:window.WeakMap,Element:window.Element,ShadowRoot:window.ShadowRoot,Image:window.Image,Node:window.Node,EventTarget:window.EventTarget,HTMLIFrameElement:window.HTMLIFrameElement,CanvasRenderingContext2D:window.CanvasRenderingContext2D},t={fetch:window.fetch,parseInt:window.parseInt,setTimeout:window.setTimeout},n=Object.create(null);return X(n,"protected",Object.create(null)),X(n,"singleton",Object.create(null)),Object.keys(e).forEach((function(t){e[t]&&(X(n.singleton,t,e[t]),X(n.protected,t,V(e[t])),e[t].prototype&&(X(n.protected[t],"prototype",V(e[t].prototype)),Object.freeze(n.protected[t].prototype)),Object.freeze(n.protected[t]))})),Object.keys(t).forEach((function(e){X(n.singleton,e,t[e])})),X(n.singleton,"call",B.bind(B)),Object.defineProperty(n,"__version__",{value:y}),Object.freeze(n.protected),Object.freeze(n.singleton),Object.freeze(n),n}(),Y=null==K?void 0:K.protected,G=null==K?void 0:K.singleton,Q=(null==G?void 0:G.call)||Function.prototype.call.bind(Function.prototype.call),Z=Ee(Y,"Function.prototype.bind"),$=Ee(Y,"Function.prototype.call"),ee=function(e){return e&&Q(Z,$,e)},te=Ee(Y,"Object.keys"),ne=Ee(Y,"Object.defineProperty"),re=Ee(G,"setTimeout","direct"),ie=ee(Ee(Y,"Object.prototype.hasOwnProperty")),oe=(ee(Ee(Y,"Array.prototype.push")),ee(Ee(Y,"Array.prototype.forEach"))),ae=ee(Ee(Y,"String.prototype.indexOf")),ce=ee(Ee(Y,"String.prototype.slice")),ue=Ee(G,"Image","direct"),se=ee(Ee(Y,"Image.prototype.src","set"))||ee(Ee(Y,"HTMLImageElement.prototype.src","set"))||function(e,t){e.src=t},le=ee(Ee(Y,"HTMLIframeElement.prototype.contentWindow","get"))||function(e){return e.contentWindow},fe=ee(Ee(Y,"HTMLIframeElement.prototype.contentDocument","get"))||function(e){return e.contentDocument},de=ee(Ee(Y,"EventTarget.prototype.addEventListener"))||function(e,t,n){e.addEventListener(t,n)},pe=ee(Ee(Y,"CanvasRenderingContext2D.prototype.fillText")),he=ee(Ee(Y,"CanvasRenderingContext2D.prototype.drawImage")),we=ee(Ee(Y,"CanvasRenderingContext2D.prototype.strokeText")),ge=ee(Ee(Y,"CanvasRenderingContext2D.prototype.measureText")),ve=Ee(G,"WeakMap","direct"),ye=ee(Ee(Y,"WeakMap.prototype.get")),me=ee(Ee(Y,"WeakMap.prototype.set")),be=ee(Ee(Y,"Element.prototype.attachShadow")),Oe=ee(Ee(Y,"Node.prototype.textContent","set"));function Ee(e,t,n){var r,i,o,a,c;void 0===n&&(n="value");var u=(null==Y||null==(r=Y.String)?void 0:r.prototype.split.value)||window.String.prototype.split,s=(null==Y||null==(i=Y.Array)?void 0:i.prototype.pop.value)||window.Array.prototype.pop,l=(null==Y||null==(o=Y.Array)?void 0:o.prototype.forEach.value)||window.Array.prototype.forEach,f=(null==Y||null==(a=Y.Object)?void 0:a.getOwnPropertyDescriptor.value)||Object.getOwnPropertyDescriptor,d=Q(u,t,"."),p=Q(s,d),h=e,w=window;if(Q(l,d,(function(e){h&&(h=h[e]),w&&(w=w[e])})),h&&h[p]){if(h=h[p],"direct"===n)return h;if(h[n])return h[n]}if(w)return"direct"===n||"value"===n?w[p]:null==(c=f(w,p))?void 0:c[n]}function _e(e){for(var t=Ee(Y,"JSON.parse"),n=Ee(G,"Uint8Array","direct"),r=Ee(Y,"String.fromCodePoint"),i=r,o=new n(e),a="",c=0,u=o.length;c<u;){var s=o[c++];if(s<=127)a+=i(s);else{var l=63&o[c++];if(s<=223)a+=i((31&s)<<6|l);else{var f=63&o[c++];if(s<=239)a+=i((15&s)<<12|l<<6|f);else{var d=63&o[c++];r?a+=i((7&s)<<18|l<<12|f<<6|d):(a+=i(63),c+=3)}}}}return t(a)}var Se,Ae,Ce,je={skey:null},ke=(null==(Se=window.crypto)?void 0:Se.subtle)||(null==(Ae=window.crypto)?void 0:Ae.webkitSubtle);function xe(){return Ce||(Ce=ke.importKey("raw",function(e){for(var t=Ee(G,"Uint8Array","direct"),n=Ee(G,"parseInt","direct"),r=ee(Ee(Y,"String.prototype.substring")),i=new t(e.length/2),o=0,a=e.length;o<a;o+=2)i[o/2]=n(r(e,o,o+2),16);return i}(w),"AES-CBC",!1,["decrypt"]))}function De(e,t){if(ie(e,t))return e[t]}function Me(e,t,n){ne(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Te(e,t,n,r,i){if(window.fetch)window.fetch(e,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(200===e.status)return i?e.arrayBuffer():e.json();throw new Error("Invalid response status "+e.status)})).then(n,r);else{var o=new XMLHttpRequest;o.open("POST",e),o.withCredentials=!0,i&&(o.responseType="arraybuffer"),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE)if(200===o.status)if(i)n(o.response);else try{n(JSON.parse(o.responseText))}catch(e){r(new Error("Parse response error"))}else r(new Error("Invalid response status "+o.status))},o.onerror=function(){r(new Error("Request error"))},o.send(JSON.stringify(t))}}var Pe={},Re=1,Fe={},We=null,qe={},Ne=f();function Ie(e,t){var n=Ne+"."+Re++;Me(Pe,n,t),Me(Fe,n,2),function(e,t){if(!w)return Le(t,{items:[]}),M("error",{errMsg:"wwapp.fetchOpenData:fail",hint:"Missing referer for jwxwork.js. See: https://work.weixin.qq.com/api/doc/90001/90143/91958"}),void J("[fetchData] fetch reject");var n=f(),r=b+"/wwopen/openData/getOpenData?f=json&r="+n;U("[fetchData] begin #"+t+" ("+n+")");var i=xe();function o(e){U("[fetchData] fetch res #"+t),i.then((function(t){return ke.decrypt({name:"AES-CBC",iv:new Uint8Array(16)},t,e)})).then(_e).then((function(e){U("[fetchData] fetch parsed #"+t),Le(t,e)})).catch(a)}function a(e){J("[fetchData] fetch fail #"+t+" ("+n+")",e),Le(t,{items:[]}),M("error",{errMsg:"wwapp.fetchOpenData:fail",rand:n})}!function(e,t,n,r){Te(e,t,n,r,!0)}(r,{items:e,skey:je.skey,sid:g},o,a)}(e,n),He()}function Le(e,t){U("[callback] begin #"+e);var n=De(Pe,e);if(delete Pe[e],delete Fe[e],n)if(t){var r=De(t,"items");r?(oe(r,(function(e){var t=De(e,"type"),n=De(e,"id"),r=De(e,"corpid");Me(qe,Ue(t,n,r),e)})),n(null,t)):n(new Error("Fetch data failed, missing items"))}else n(new Error("Fetch data failed, missing response"));else J("[callback] missing callback")}function ze(e,t,n){return De(qe,Ue(e,t,n))}function Ue(e,t,n){return e+"::"+t+"::"+(n||"")}function He(){We||(We=setTimeout((function(){We=null;var e=te(Fe);if(e.length){var t=[];oe(e,(function(e){var n=De(Fe,e);n>0?Me(Fe,e,n-1):(delete Fe[e],t.push(e))})),t.length&&J("[callback] timeout, callbackIds: "+t.join(",")),He()}}),2e3))}var Je=new ue,Be=!1,Ve=null,Xe=[];function Ke(){var e=Xe;Xe=[],oe(e,(function(e){e(Ve)}))}de(Je,"load",(function(){Be=!0,re(Ke,1)})),de(Je,"error",(function(){Ve=new Error("Failed to load crossorigin image"),re(Ke,1)})),se(Je,"https://wwcdn.weixin.qq.com/node/wework/images/1x1-00000000.91e42db1c6.png");var Ye="\ufeff",Ge=String.fromCharCode(8204),Qe=String.fromCharCode(8205),Ze=String.fromCharCode(8203),$e=[String.fromCharCode(8206),String.fromCharCode(8207),Ge,Qe,Ze],et={},tt=0;function nt(e){var t=De(e,"encrypt_token");if(t)return t;var n=De(e,"data"),r=De(e,"encrypt_text_data");if(n&&r){for(var i=(tt++).toString(5),o="",a=0,c=i.length;a<c;a++)o+=$e[i[a]];var u=Ye+r+o+Ye;return Me(et,u,n),Me(e,"encrypt_token",u),u}}function rt(e){var t=ae(e,Ye,0);if(-1===t)return e;for(var n=ce(e,0,t);-1!==t;){var r=ae(e,Ye,t+1);if(-1===r)break;var i=De(et,ce(e,t,r+1));i?(n+=i,t=r+1):(n+=ce(e,t,r),t=r)}return n+ce(e,t)}var it=ve&&new ve,ot=!1,at=!1;function ct(e){ye(it,e)||(at||he(e,Je,0,0),me(it,e,!0))}function ut(e,t){var n=null;try{n=fe(e)}catch(e){}if(null!==n)throw new Error("Missing cross origin");le(e).postMessage(t,b)}var st,lt,ft=function(){function e(){var e=this;this.iframe=document.createElement("iframe"),this.state="loading",this.queue=[],this.timeout=null,this.iframe.onload=T("MainFrame.onload",(function(){U("[MainFrame] onload"),e.state="ready",e.fetchData()})),this.iframe.onerror=function(t){W((null==t?void 0:t.error)||new Error("MainFrame load error"),"MainFrame.onerror"),e.state="error"},this.iframe.style.display="none",this.iframe.referrerPolicy="origin",this.iframe.src=O}var t=e.prototype;return t.enqueueFetch=function(e){var t=this;this.queue.push(e),this.timeout||(this.timeout=setTimeout(T("MainFrame.timeout",(function(){"ready"===t.state&&t.fetchData()})),20))},t.fetchData=function(){var e={},t=[];this.queue.forEach((function(n){var r=n.type+"::"+n.id+"::"+(n.corpid||"");e[r]||(e[r]=!0,t.push(n))})),t.length&&(this.timeout=null,this.queue=[],U("[MainFrame] fetchData"),ut(this.iframe,JSON.stringify({type:"fetch",items:t,skey:je.skey,sid:g})))},e}(),dt=["fontFamily","fontSize","fontWeight","fontStyle","fontVariant","fontStretch","fontSizeAdjust","color","cursor"],pt=function(){function e(e,t){this.renderType="emtpy",this.renderEl=null,this.container=e,this.mainFrame=t}var t=e.prototype;return t.update=function(){var e=this.getItem();if(!e.type||!e.id)return this.renderEmpty();this.renderText(e)},t.renderEmpty=function(){this.setChild("empty")},t.renderText=function(e){var t=this;if("frame"!==this.renderType||"error"===this.loadState){var n=document.createElement("iframe");n.onload=T("Frame.onload",(function(){t.renderEl===n&&(t.loadState="ready",t.notifyUpdate())})),n.onerror=function(e){t.renderEl===n&&(W((null==e?void 0:e.error)||new Error("Frame load error"),"Frame.onerror"),t.loadState="error")};var r=u(e.type+"::"+e.id+"::"+(e.corpid||""));n.frameBorder=0,n.referrerPolicy="origin",n.src=O+"&init="+r,this.loadState="loading",this.setChild("frame",n)}this.mainFrame.enqueueFetch(e),"ready"===this.loadState&&this.notifyUpdate(e)},t.setChild=function(e,t){void 0===t&&(t=null);for(var n=this.container;n.firstChild;)n.removeChild(n.firstChild);t&&n.appendChild(t),this.renderEl=t,this.renderType=e},t.getItem=function(){return{type:this.container.getAttribute("type"),id:this.container.getAttribute("openid"),corpid:this.container.getAttribute("corpid")}},t.notifyUpdate=function(e){if(void 0===e&&(e=this.getItem()),e.type&&e.id){var t={},n=getComputedStyle(this.container);dt.forEach((function(e){t[e]=n[e]})),ut(this.renderEl,JSON.stringify({type:"update",item:e,style:t}))}},e}(),ht="__WW_OPENDATA_RENDER__";function wt(e){e&&(e[ht]||(e[ht]=new pt(e,st)),e[ht].update())}var gt={};function vt(e){if(e.origin===b){var t,n,r;try{t=JSON.parse(e.data)}catch(e){}if(t&&gt[t.type])n=document.querySelectorAll("ww-open-data iframe"),r=function(n){n.contentWindow===e.source&&gt[t.type](e,t,n)},Array.prototype.forEach.call(n,r)}}gt["ww.opendata.event"]=function(e,t,n){"click"===t.eventType&&n.parentNode.click()},gt["ww.opendata.resize"]=function(e,t,n){var r=t.size;n.style.width=r.width,n.style.height=r.height,M("update",{el:n.parentNode,hasData:!!r.width})};var yt=ve&&new ve;function mt(e){var t=ye(yt,e);if(t)return t;try{var n=be(e,{mode:"closed"});return me(yt,e,n),n}catch(t){J("[getShadow] fail",e,t),M("error",t)}}var bt=[],Ot=null;function Et(e){if(e&&e.getAttribute){var t=e.getAttribute("type");if(t){var n=e.getAttribute("openid");if(n){var r=e.getAttribute("corpid"),i=mt(e);if(!i)return J("[bind] attach shadow failed",e),void M("error",{errMsg:"bind:fail",message:"attach shadow-dom fail",element:e});var o=ze(t,n,r);if(o){var a=De(o,"data");if(Oe(i,a||""),M("update",{element:e,hasData:!!a}),a)return}bt.indexOf(e)<0&&bt.push(e),Ot||(Ot=setTimeout(T("bindPending",_t),20))}else M("error",{errMsg:"bind:fail",message:"missing open-data openid",element:e})}else M("error",{errMsg:"bind:fail",message:"missing open-data type",element:e})}else M("error",{errMsg:"bind:fail",message:"missing bind element",element:e})}function _t(){var e=f(),t=bt;Ot=null,bt=[];var n=[],r={};oe(t,(function(e){var t=e.getAttribute("type");if(t){var i=e.getAttribute("openid");if(i){var o=e.getAttribute("corpid"),a=Ue(t,i,o);r[a]||(r[a]=!0,n.push({type:t,id:i,corpid:o}))}}})),n.length&&Ie(n,(function(n){if(n)return J("[bindPending] fetch error",e,n),void M("error",n);oe(t,(function(t){var n=mt(t),r=t.getAttribute("type");if(!r)return J("[bindPending] missing open-data type",e,t),void M("error",{errMsg:"bind:fail",message:"missing open-data type",element:t});var i=t.getAttribute("openid");if(!i)return J("[bindPending] missing open-data openid",e,t),void M("error",{errMsg:"bind:fail",message:"missing open-data openid",element:t});var o=ze(r,i,t.getAttribute("corpid"));if(!o)return J("[bindPending] skip missing data",e,t),void M("error",{errMsg:"bind:fail",message:"missing data",element:t});var a=De(o,"data");Oe(n,a||""),M("update",{element:t,hasData:!!a})}))}))}var St=0;be||(St|=1),ke||(St|=2),"http:"===document.location.protocol&&(St|=4);var At,Ct=0,jt=navigator.userAgent;if(!(/miniProgram/i.test(jt)||"miniprogram"===window.__wxjs_environment))/wxwork/i.test(jt)&&(Ct|=4),window.WeixinSandBox&&(Ct|=1),(null==(At=window.wx)?void 0:At.agentConfig)&&(Ct|=2);var kt=T("bind",St?wt:Et),xt=T("bindAll",St?function(e){Array.prototype.forEach.call(e,wt)}:function(e){oe(e,Et)});function Dt(e){if(void 0===e&&(e={}),!(e.corpid&&e.agentid&&e.timestamp&&e.nonceStr&&e.signature&&e.jsApiList)){var t={err_Info:"fail",errMsg:"agentConfig:fail",hint:"Missing params"};return null==e.fail||e.fail(t),void(null==e.complete||e.complete(t))}var n={corpid:e.corpid+"",agentid:e.agentid+"",timestamp:e.timestamp+"",nonceStr:e.nonceStr+"",signature:e.signature+"",jsApiList:e.jsApiList,url:window.location.href};Mt("agentConfig",{config:n,sid:g},e,(function(e){var t;je.skey=null==(t=e.data)?void 0:t.skey,xt(document.querySelectorAll("ww-open-data")),U("[user config] #"+JSON.stringify(n))}))}function Mt(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r=s);var i=f();U("[invoke] "+e+" begin #"+i),function(e,t,n,r){Te(e,t,n,r,!1)}(b+"/wwopen/openData/"+e+"?f=json&r="+i,t,(function(t){var o,a=(null==(o=t.data)?void 0:o.result)||t.data||{errMsg:e+":fail"};a.errMsg===e+":ok"?(r(t),null==n.success||n.success(a)):(J("[invoke] "+e+" fail #"+i,t),null==n.fail||n.fail(a)),null==n.complete||n.complete(a)}),(function(t){J("[invoke] "+e+" fail #"+i,t);var r={errMsg:e+":fail"};null==n.fail||n.fail(r),null==n.complete||n.complete(r)}))}if(Ct)H("skip inject",Ct);else{if(St?(H("inject iframe",St),function(){window.addEventListener?window.addEventListener("message",T("dispatchMessage",vt)):window.attachEvent("onmessage",T("dispatchMessage",vt));var e=document.querySelector("head");lt=document.createElement("style"),e.appendChild(lt),st=new ft,e.appendChild(st.iframe);var t=lt.sheet;t.insertRule("ww-open-data { display: inline-block; vertical-align: text-bottom; overflow: hidden }",0),t.insertRule("ww-open-data img { display: block; width: 100%; height: 100% }",1),t.insertRule("ww-open-data iframe { display: block; width: 0; height: 0 }",2)}()):U("inject begin",St),w||function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,[z].concat(n)),F.apply(L,n)}("Missing referer for jwxwork.js. See: https://work.weixin.qq.com/api/doc/90001/90143/91958"),window.wx?window.wx.agentConfig||U("define wx.agentConfig"):H("missing window.wx"),window.wx||(window.wx={}),window.wx.agentConfig||ne(window.wx,"agentConfig",{value:T("agentConfig",Dt)}),window.WWOpenData)J("window.WWOpenData already exists");else{var Tt={};Pt(Tt,"bindAll",xt),Pt(Tt,"bind",kt),Pt(Tt,"on",x),Pt(Tt,"once",(function(e,t){x(e,(function e(n){D("name",e),t(n)}))})),Pt(Tt,"off",D),Pt(Tt,"checkSession",(function(e){void 0===e&&(e={}),Mt("checkSession",{sid:g},e)})),Pt(Tt,"initCanvas",(function(){var e;if(ot)return!0;var t=null==(e=window.CanvasRenderingContext2D)?void 0:e.prototype;return!!t&&(t.strokeText=function(e,t,n,r){if(!Be)return null==r?we(this,e,t,n):we(this,e,t,n,r);var i=rt(e);return i!==e&&ct(this),null==r?we(this,i,t,n):we(this,i,t,n,r)},t.fillText=function(e,t,n,r){if(!Be)return null==r?pe(this,e,t,n):pe(this,e,t,n,r);var i=rt(e);return i!==e&&ct(this),null==r?pe(this,i,t,n):pe(this,i,t,n,r)},t.measureText=function(e){return ge(this,Be?rt(e):e)},ot=!0,!0)})),Pt(Tt,"enableCanvasSharing",(function(){at=!0})),Pt(Tt,"disableCanvasSharing",(function(){at=!1})),Pt(Tt,"prefetch",(function(e,t){var n=e.items;Ie(n,(function(e){if(e)return t(e);var r=[];oe(n,(function(e){var t=ze(e.type,e.id,e.corpid);t&&1===De(t,"datakind")&&r.push({type:e.type,id:e.id,corpid:e.corpid,data:nt(t)})})),function(e){Be?e():Ve?e(Ve):Xe.push(e)}((function(e){e?t(e):t(null,{items:r})}))}))})),ne(Tt,"__version__",{value:y}),Pt(Tt,"agentConfig",T("agentConfig",Dt)),Pt(window,"WWOpenData",Tt),U("window.WWOpenData defined",window.WWOpenData)}"customElements"in window&&!customElements.get("ww-open-data")&&function(){try{U("register custom element");var e=function(e){var n,r,i,o,a;function u(){var t;return(t=e.call(this)||this)._current={},t.getAttribute("type")&&t.getAttribute("openid")?(Rt(c(t)),t):c(t)}return r=e,(n=u).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,u.prototype.attributeChangedCallback=function(){this._current.type===this.getAttribute("type")&&this._current.id===this.getAttribute("openid")&&this._current.corpid===this.getAttribute("corpid")||Rt(this)},i=u,a=[{key:"observedAttributes",get:function(){return["type","openid","corpid"]}}],(o=null)&&t(i.prototype,o),a&&t(i,a),u}(a(HTMLElement));customElements.define("ww-open-data",e)}catch(e){W(e,"register custom element")}}()}function Pt(e,t,n){ne(e,t,{value:n,enumerable:!0})}function Rt(e){e._current={type:e.getAttribute("type"),id:e.getAttribute("openid"),corpid:e.getAttribute("corpid")},kt(e)}}catch(A){e.captureException(A,"?")}}();